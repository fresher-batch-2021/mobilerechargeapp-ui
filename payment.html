<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="payment">
    <form  onsubmit="pay()">
    <h1>Payment options</h1>
    
    <input type="radio"  name="paymentType"  id="paymentType" value="DEBIT" required>
    <label for="debit">Debitcard</label><br>

    
    <input type="radio" name="paymentType" id="paymentType" value="UPI" required>
    <label for="upi">UPI</label><br>
    <input type="radio" name="paymentType" id="paymentType" value="wallet" required>
    <label for="wallet">wallet</label><br>
    

<button class="payment-button" onclick="wallet()" >Proceed</button>
    </form>
    </div>


    <script>
        function pay(){
            event.preventDefault();
            let paymentType ;
            let paymentTypeOptions = document.querySelectorAll("#paymentType");
            paymentTypeOptions.forEach(obj=> {
                if(obj.checked) {  
                    paymentType = obj.value;
                }
            });
            alert(paymentType);
            if(paymentType=="DEBIT"){
                window.location.href= "debitcard.html";
            }
            else if(paymentType=="wallet"){
                window.location.href="wallet.html";
            }
            else{
                window.location.href="upi.html";
            }
        }
        function wallet(value){
            let userStr = localStorage.getItem("LOGGED_IN_USER");
    let user = userStr != null ? JSON.parse(userStr):null;
    console.log(user)
            const amount=value;
            console.log(amount);
            let obj={"amount":amount

            }
            const url=`https://product-mock-api.herokuapp.com/rechargeapp/api/v1/users/${user.id}/recharge`
            axios.patch(url,obj).then(res=>{
                console.log(res.data);
            })
        }
        const queryString=window.location.search;
        console.log(queryString);
        const urlParams=new URLSearchParams(queryString);
        const planPrice = urlParams.get('value');
        console.log("plan : ", planPrice);
    </script>
</body>
</html>