<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>plan</title>
    <link rel="stylesheet" href="styles.css">
       
    

</head>

<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
    integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <header id="header">
        <!--append-->
    </header>
    <div class="div1">
        <div class="div2">
            <div class="row">

                <div class="col-1">
                    
                    <table >
                        <caption> Available Plans</caption>
                        <thead>

                        <tr>
                            <th scope="col">id</th>
                            <th scope="col">Price</th>
                            <th scope="col">Validity</th>
                            <th scope="col">Descriptionnnn!!!</th>
                        </tr>
                    </thead>
                        <tbody id="plans">

                        </tbody>
                    </table>
                    <input class="demo"type="submit" value="Recharge" onclick="foxtrot()">
                </div>
                <div class  =  "col-2">
                    <img src="./images/airtel.png" alt="airtel" height="60px" width="80px">
                    <img style="padding-left : 30px;" src="./images/jio.png" alt="jio" height="60px" width="80px">
                    <img style="padding-left:50px;" src="./images/vodafoneidea.png" alt=vi" height="60px" width="80px">
                </div>
            </div>
        </div>
        <script src="js/jquery.min.js"></script>
            <script>
                $("#header").load("_header.html");
    function plan()
    {
        const userName="apikey-v2-kf8ex4frj52lu2wwin72qqktpi3occ9bfv4p80vbr99";
    const dbpassword="68fc5b9dc8c58071087abaecc44a5f29";
    const basicAuth = 'Basic ' + btoa(userName + ':' + dbpassword);
    const url="https://2fbcb9ec-d57d-431a-8d72-186d88ddf478-bluemix.cloudantnosqldb.appdomain.cloud/rechargeapp_plans/_all_docs?include_docs=true";
      
        axios.get(url,{ headers: {'Authorization': basicAuth }}).then(res => {
            console.log(res)
           let data = res.data.rows;
           let planList = data.map(obj=>obj.doc);
           console.log(planList);
           let content="";
        for(let planObj of planList){
            content=content+`<tr><td>${planObj.id}</td><td>${planObj.price}</td><td>${planObj.validity}</td><td>${planObj.description}</td></tr>`
        }
        document.querySelector("#plans").innerHTML=content;
        }).catch(err => {
            console.log(err.response.data);
        })

       
    }
    plan();
    function foxtrot(){
        window.location.href="recharge.html";
    }
    
        
    
</script>
</body>

</html>